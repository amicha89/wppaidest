"use strict";if($(".main-content").find("#dispute-discussion").length&&(document.getElementById("file"),document.getElementById("file-chosen"),jQuery.extend(jQuery.validator.messages,{required:requirdFieldText}),$("#reply").validate({rules:{description:{required:!0},file:{extension:extensionsValidationRule}},messages:{file:{extension:extensionsValidationMessage}},submitHandler:function(a){$("#dispute-reply").attr("disabled",!0).click(function(a){a.preventDefault()}),$(".spinner").show(),$("#dispute-reply-text").text(submittingText),a.submit()}}),$("#status").on("change",function(){var a=$(this).val(),b=$("#id").val();$.ajax({method:"POST",url:SITE_URL+"/dispute/change_reply_status",data:{status:a,id:b}}).done(function(c){"Open"==a?a="Open":"Solve"==a?a="Solved":"Close"==a&&(a="Closed");var b='<div class="alert alert-success" role="alert">'+(message=statusChangeText.replace(":x",a))+"</div><br>";$("#alertDiv").html(b),setTimeout(function(){location.reload()},2e3)})})),$(".main-content").find("#ticket-reply").length){let a=document.getElementById("file"),b=document.getElementById("file-chosen");a.addEventListener("change",function(){b.textContent=this.files[0].name}),jQuery.extend(jQuery.validator.messages,{required:requirdFieldText}),$("#reply").validate({rules:{description:{required:!0},file:{extension:extensionsValidationRule}},messages:{file:{extension:extensionsValidationMessage}},submitHandler:function(a){$("#ticket-reply").attr("disabled",!0).click(function(a){a.preventDefault()}),$(".spinner").show(),$("#ticket-reply-text").text(submittingText),a.submit()}}),$("#status").on("change",function(){var a=$(this).val(),b=$("#ticket_id").val();$.ajax({method:"POST",url:SITE_URL+"/ticket/change_reply_status",data:{status_id:a,ticket_id:b}}).done(function(a){var b='<div class="alert alert-success" role="alert">'+(message=statusChangeText.replace(":x",a.status))+"</div><br>";$("#alertDiv").html(b),setTimeout(function(){location.reload()},2e3)})})}function changeProfile(){$("#file").click()}if($(".main-content").find("#user-profile").length){function c(){let a=$("#user_id").val();$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:SITE_URL+"/profile/qr-code/add-or-update",dataType:"json",data:{user_id:a},beforeSend:function(){swal(pleaseWaitText,loadingText,{closeOnClickOutside:!1,closeOnEsc:!1,buttons:!1,timer:2e3})}}).done(function(a){!0==a.status&&$(".user-profile-qr-code").html(`<img src="https://api.qrserver.com/v1/create-qr-code/?data=${a.secret}&amp;size=200x200"/>`)}).fail(function(a){swal({title:errorText,text:JSON.parse(a.responseText).exception,icon:"error",closeOnClickOutside:!1,closeOnEsc:!1})})}$(document).on("click","#print-qr-code-btn",function(a){a.preventDefault();let b=SITE_URL+"/profile/qr-code-print/"+userId+"/user";$(this).attr("href",b),window.open($(this).attr("href"),"_blank")}),$(window).on("load",function(){swal(pleaseWaitText,loadingText,{closeOnClickOutside:!1,closeOnEsc:!1,buttons:!1,timer:2e3}),""!=QrCodeSecret?($(".user-profile-qr-code").html(`<img src="https://api.qrserver.com/v1/create-qr-code/?data=${QrCodeSecret}&amp;size=200x200"/>`),$("#qr-code-btn").removeClass("add-qr-code").addClass("update-qr-code").text(updateQrCodeText),$("#print-qr-code-btn").show()):($(".user-profile-qr-code").html(`<img class="" src="${SITE_URL}/public/uploads/userPic/default-image.png" class="img-responsive"/>`),$("#qr-code-btn").addClass("add-qr-code").text(addQrCodeText))}),$(document).on("click",".update-qr-code",function(a){a.preventDefault(),c()}),$(document).on("click",".add-qr-code",function(a){a.preventDefault(),c(),$("#qr-code-btn").removeClass("add-qr-code").addClass("update-qr-code").text(updateQrCodeText)}),$("#add").on("hidden.bs.modal",function(){""!=$("#phone").val()&&($(this).find("input").val("").end(),$("#complete-phone-verification").validate().resetForm(),window.location.reload())}),$(document).ready(function(){$("#phone").intlTelInput({separateDialCode:!0,nationalMode:!0,preferredCountries:[countryShortCode],autoPlaceholder:"polite",placeholderNumberType:"MOBILE",utilsScript:utilsScriptLoadingPath});var a=$("#phone").intlTelInput("getSelectedCountryData");$("#defaultCountry").val(a.iso2),$("#carrierCode").val(a.dialCode),$("#phone").on("countrychange",function(c,a){if($("#defaultCountry").val(a.iso2),$("#carrierCode").val(a.dialCode),$.trim($(this).val())){if($(this).intlTelInput("isValidNumber")&&isValidPhoneNumber($.trim($(this).val()))){$("#tel-number-error").html("");var b=$("#id").val();$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:SITE_URL+"/profile/duplicate-phone-number-check",dataType:"json",cache:!1,data:{phone:$.trim($(this).val()),carrierCode:$.trim(a.dialCode),id:b}}).done(function(a){!0==a.status?($("#tel-number-error").html(""),$("#phone-number-error").show(),$("#phone-number-error").addClass("error").html(a.fail).css({color:"#f50000 !important","font-size":"14px","font-weight":"400","padding-top":"5px"}),$("#common_button").prop("disabled",!0)):!1==a.status&&($("#tel-number-error").show(),$("#phone-number-error").html(""),$("#common_button").prop("disabled",!1))})}else $("#tel-number-error").addClass("error").html(validPhoneNumberErrorText).css({color:"#f50000 !important","font-size":"14px","font-weight":"400","padding-top":"5px"}),$("#common_button").prop("disabled",!0),$("#phone-number-error").hide()}else $("#tel-number-error").html(""),$("#phone-number-error").html(""),$("#common_button").prop("disabled",!1)})}),$(document).ready(function(){$("#phone").on("blur",function(d){if($.trim($(this).val())){if($(this).intlTelInput("isValidNumber")&&isValidPhoneNumber($.trim($(this).val()))){var b=$("#id").val(),a=$(this).val().replace(/-|\s/g,""),a=$(this).val().replace(/^0+/,""),c=$("#phone").intlTelInput("getSelectedCountryData").dialCode;0==a.length?($("#phone-number-error").addClass("error").html(fieldRequiredText).css({color:"#f50000 !important","font-size":"14px","font-weight":"400","padding-top":"5px"}),$("#common_button").prop("disabled",!0)):($("#phone-number-error").hide(),$("#common_button").prop("disabled",!1)),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:SITE_URL+"/profile/duplicate-phone-number-check",dataType:"json",cache:!1,data:{phone:a,id:b,carrierCode:c}}).done(function(b){$("#phone-number-error").show(),!0==b.status?0==a.length?$("#phone-number-error").html(""):($("#phone-number-error").addClass("error").html(b.fail).css({color:"#f50000 !important","font-size":"14px","font-weight":"400","padding-top":"5px"}),$("#common_button").prop("disabled",!0)):!1==b.status&&($("#common_button").prop("disabled",!1),$("#phone-number-error").html(""))}),$("#tel-number-error").html(""),$("#phone-number-error").show(),$("#common_button").prop("disabled",!1)}else $("#tel-number-error").addClass("error").html(validPhoneNumberErrorText).css({color:"#f50000 !important","font-size":"14px","font-weight":"400","padding-top":"5px"}),$("#common_button").prop("disabled",!0),$("#phone-number-error").hide()}else $("#tel-number-error").html(""),$("#phone-number-error").html(""),$("#common_button").prop("disabled",!1)})}),$(document).ready(function(){var b=$("#is_sms_env_enabled").val(),a=$("#checkPhoneVerification").val();!0!=b&&"Enabled"!=a||"Enabled"!=a?$(".next").removeClass("next").addClass("form_submit").html(submitText):$(".next").removeClass("form_submit").addClass("next").html(nextText)}),$(document).on("click",".next",function(){var a=$("input[name=phone]");if(""==a.val())return $("#phone-number-error").addClass("error").html(fieldRequiredText).css({color:"#f50000 !important","font-size":"14px","font-weight":"400","padding-top":"5px"}),!1;if(a.hasClass("error"))return!1;$(".modal-title").html(getCodeText),$("#subheader_text").html(verificationCodeText),$(".phone_group").hide(),$("#static_phone_show").show(),$(".edit").show(),$(this).removeClass("next").addClass("get_code").html(getCodeText);var b=$("#phone").intlTelInput("getNumber");return $("#static_phone_show").html(b+"&nbsp;&nbsp;"),!0}),$(document).on("click",".edit",function(){$(".get_code").removeClass("get_code").addClass("next").html(nextText),$(".static_phone_show").html(""),$(this).hide(),$("#subheader_text").html(phoneNumberText),$(".phone_group").show()}),$(document).on("click",".get_code",function(){$(".modal-title").html(verifyPhoneText),$(".phone_group").hide(),$(".static_phone_show").html(""),$("#subheader_text").html(smsCodeSentText+"<br><br>"+smsCodeSubmitText),$("#subheader_text").html(smsCodeSentText+"<br><br>"+smsCodeSubmitText),$(".edit").hide(),$("#phone_verification_code").show().val(""),$(this).removeClass("get_code").addClass("verify").html(verifyText);var a=$("#phone").intlTelInput("getSelectedCountryData").dialCode,b=$("#phone").intlTelInput("getNumber");$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:SITE_URL+"/profile/getVerificationCode",dataType:"json",cache:!1,data:{phone:b,carrierCode:a}}).done(function(a){!0==a.status&&$("#hasVerificationCode").val(a.message)})}),$(document).on("click",".verify",function(){var a=$("#common_button"),b=$("#phone_verification_code").val(),c=$("#phone").intlTelInput("getNumber"),d=$("#phone").intlTelInput("getSelectedCountryData").dialCode,e=$("#phone").intlTelInput("getSelectedCountryData").iso2;a.hasClass("verify")&&$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:SITE_URL+"/profile/complete-phone-verification",dataType:"json",cache:!1,data:{phone:c,defaultCountry:e,carrierCode:d,phone_verification_code:b}}).done(function(a){!1==a.status||500==a.status?($("#message").css("display","block"),$("#message").html(a.message),$("#message").addClass(a.error)):($("#message").removeClass("alert-danger"),$("#message").css("display","block"),$("#message").html(a.message),$("#message").addClass(a.success),$("#subheader_text").hide(),$("#phone_verification_code").hide(),$("#common_button").hide(),$("#close").hide(),$(".modal-title").hide())})}),$(document).on("click",".form_submit",function(){if($("#common_button").hasClass("form_submit")){var a=$("#phone").intlTelInput("getNumber"),b=$("#phone").intlTelInput("getSelectedCountryData").iso2,c=$("#phone").intlTelInput("getSelectedCountryData").dialCode;$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:SITE_URL+"/profile/add-phone-number",dataType:"json",cache:!1,data:{phone:a,defaultCountry:b,carrierCode:c}}).done(function(a){!0==a.status&&($("#message").css("display","block"),$("#message").html(a.message),$("#message").addClass(a.class_name),$("#subheader_text").hide(),$("#common_button").hide(),$("#close").hide(),$(".phone_group").hide())})}}),$("#editModal").on("hidden.bs.modal",function(){""!=$("#edit_phone").val()&&($("#edit_phone").val(`+${OrginalUsercarrierCode}${OrginalUserphone}`),window.location.reload())}),$(document).ready(function(){$("#edit_phone").intlTelInput({separateDialCode:!0,nationalMode:!0,preferredCountries:["us"],autoPlaceholder:"polite",placeholderNumberType:"MOBILE",formatOnDisplay:!1,utilsScript:utilsScriptLoadingPath}).done(function(){null!==formattedPhone&&null!==carrierCode&&null!==defaultCountry&&($("#edit_phone").intlTelInput("setNumber",formattedPhone),$("#edit_defaultCountry").val(defaultCountry),$("#edit_carrierCode").val(carrierCode))})});var d=$("#edit_phone").intlTelInput("getSelectedCountryData");function e(b){var a=new FormData;a.append("file",b.files[0]),a.append("_token",csrfToken),$("#loading").css("display","block"),$.ajax({url:profileImageUploadUrl,data:a,type:"POST",contentType:!1,processData:!1,cache:!1,success:function(a){a.fail?$("#file-error").show().addClass("error").html(a.errors.file).css({color:"#f50000 !important","font-size":"14px","font-weight":"400","padding-top":"5px"}):($("#file-error").hide(),$("#file_name").val(a),$("#profileImage").attr("src",profileImageSourceUrl+"/"+a),$("#profileImageHeader").attr("src",profileImageSourceUrl+"/"+a),$("#profileImageHeaderdrop").attr("src",profileImageSourceUrl+"/"+a),location.reload()),$("#loading").css("display","none")},error:function(a,b,c){}})}$("#edit_phone").on("countrychange",function(c,a){if($("#edit_defaultCountry").val(a.iso2),$("#edit_carrierCode").val(a.dialCode),$.trim($(this).val())){if($(this).intlTelInput("isValidNumber")&&isValidPhoneNumber($.trim($(this).val()))){$("#edit-tel-number-error").html("");var b=$("#id").val();$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:SITE_URL+"/profile/duplicate-phone-number-check",dataType:"json",cache:!1,data:{phone:$.trim($(this).val()),carrierCode:$.trim(countryData.dialCode),id:b}}).done(function(a){!0==a.status?($("#edit-tel-number-error").html(""),$("#edit-phone-number-error").show(),$("#edit-phone-number-error").addClass("error").html(a.fail).css("font-weight","bold"),$("#common_button_update").prop("disabled",!0)):!1==a.status&&($("#edit-tel-number-error").show(),$("#edit-phone-number-error").html(""),$("#common_button_update").prop("disabled",!1))})}else $("#edit-tel-number-error").addClass("error").html(validPhoneNumberErrorText).css({color:"#f50000 !important","font-size":"14px","font-weight":"400","padding-top":"5px"}),$("#common_button_update").prop("disabled",!0),$("#edit-phone-number-error").hide()}else $("#edit-tel-number-error").html(""),$("#edit-phone-number-error").html(""),$("#common_button_update").prop("disabled",!1)}),$(document).ready(function(){$("#edit_phone").on("blur",function(d){if($.trim($(this).val())){if($(this).intlTelInput("isValidNumber")&&isValidPhoneNumber($.trim($(this).val()))){var b=$("#user_id").val(),a=$(this).val().replace(/-|\s/g,""),a=$(this).val().replace(/^0+/,""),c=$(this).intlTelInput("getSelectedCountryData").dialCode;$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:SITE_URL+"/profile/duplicate-phone-number-check",dataType:"json",cache:!1,data:{id:b,phone:a,carrierCode:$.trim(c)}}).done(function(b){!0==b.status?0==a.length?$("#edit-phone-number-error").html(""):($("#edit-phone-number-error").addClass("error").html(b.fail).css({color:"#f50000 !important","font-size":"14px","font-weight":"400","padding-top":"5px"}),$("#common_button_update").prop("disabled",!0)):!1==b.status&&($("#common_button_update").prop("disabled",!1),$("#edit-phone-number-error").html(""))}),$("#edit-tel-number-error").html(""),$("#edit-phone-number-error").show(),$("#common_button_update").prop("disabled",!1)}else $("#edit-tel-number-error").addClass("error").html(validPhoneNumberErrorText).css({color:"#f50000 !important","font-size":"14px","font-weight":"400","padding-top":"5px"}),$("#common_button_update").prop("disabled",!0),$("#edit-phone-number-error").hide()}else $("#edit-tel-number-error").html(""),$("#edit-phone-number-error").html(""),$("#common_button_update").prop("disabled",!1)})}),$(document).on("click",".update",function(){var a=$("input[name=edit_phone]");if(""==a.val())return $("#edit-phone-number-error").addClass("error").html(fieldRequiredText).css({color:"#f50000 !important","font-size":"14px","font-weight":"400","padding-top":"5px"}),!1;if(a.hasClass("error"))return!1;$(".modal-title").html(getCodeText),$("#subheader_edit_text").html(verificationCodeText),$(".phone_group").hide(),$("#edit_static_phone_show").show(),$(".edit_button_edit").show(),$(this).removeClass("update").addClass("edit_get_code").html(getCodeText);var b=$("#edit_phone").intlTelInput("getNumber");return $("#edit_static_phone_show").html(b+"&nbsp;&nbsp;"),!0}),$(document).on("click",".edit_get_code",function(){$(".modal-title").html(verifyPhoneText),$(this).removeClass("edit_get_code").addClass("edit_verify").html(verifyText),$(".phone_group").hide(),$(".edit_button_edit").hide(),$(".edit_static_phone_show").html(""),$("#subheader_edit_text").html(smsCodeSentText+"<br><br>"+smsCodeSubmitText),$("#edit_phone_verification_code").show().val("");var a=$("#edit_phone").intlTelInput("getNumber"),b=$("#edit_phone").intlTelInput("getSelectedCountryData").dialCode;$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:SITE_URL+"/profile/editGetVerificationCode",dataType:"json",cache:!1,data:{phone:a,code:b}}).done(function(a){!0==a.status&&$("#editHasVerificationCode").val(a.message)})}),$(document).on("click",".edit_verify",function(){var a=$("#common_button_update"),b=$("#edit_phone_verification_code").val(),c=$("#edit_phone").intlTelInput("getNumber"),d=$("#edit_phone").intlTelInput("getSelectedCountryData").iso2,e=$("#edit_phone").intlTelInput("getSelectedCountryData").dialCode;a.hasClass("edit_verify")&&$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:SITE_URL+"/profile/edit-complete-phone-verification",dataType:"json",cache:!1,data:{phone:c,flag:d,code:e,edit_phone_verification_code:b}}).done(function(a){!1==a.status||500==a.status?($("#message").css("display","block"),$("#message").html(a.message),$("#message").addClass(a.error)):($("#message").removeClass("alert-danger"),$("#message").css("display","block"),$("#message").html(a.message),$("#message").addClass(a.success),$("#subheader_edit_text").hide(),$("#edit_phone_verification_code").hide(),$("#common_button_update").hide(),$("#close").hide(),$(".modal-title").hide())})}),$(document).on("click",".edit_form_submit",function(){if($("#common_button_update").hasClass("edit_form_submit")){var a=$("#edit_phone").intlTelInput("getNumber"),b=$("#edit_phone").intlTelInput("getSelectedCountryData").iso2,c=$("#edit_phone").intlTelInput("getSelectedCountryData").dialCode;$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:SITE_URL+"/profile/update-phone-number",dataType:"json",cache:!1,data:{phone:a,flag:b,code:c}}).done(function(a){!0==a.status&&($("#message").css("display","block"),$("#message").html(a.message),$("#message").addClass(a.class_name),$("#subheader_edit_text").hide(),$("#common_button_update").hide(),$("#close").hide(),$(".phone_group").hide(),$(".modal-title").hide())})}}),$("#file").change(function(){""!=$(this).val()&&e(this)}),jQuery.extend(jQuery.validator.messages,{required:fieldRequiredText,minlength:$.validator.format(minPasswordCharacterLength.replace(":x","{0}")),alpha:nameError,maxlength:nameLengthError}),$("#reset_password").validate({rules:{old_password:{required:!0},password:{required:!0,minlength:6},confirm_password:{equalTo:"#password",minlength:6}},messages:{password:{required:fieldRequiredText},confirm_password:{equalTo:passwordSameValue}}}),$("#profile_update_form").validate({rules:{first_name:{required:!0,alpha:!0,maxlength:30},last_name:{required:!0,alpha:!0,maxlength:30}},submitHandler:function(a){$("#users_profile").attr("disabled",!0),$(".spinner").show(),$("#users_profile_text").text(submittingText),a.submit()}}),$.validator.addMethod("alpha",function(a,b){return this.optional(b)||a==a.match(/^[a-zA-Z\s]+$/)})}