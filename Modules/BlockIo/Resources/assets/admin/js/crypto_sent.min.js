"use strict";function restrictNumberToPrefdecimalOnInput(a){restrictNumberToPrefdecimal(a,$("#network").data("type"))}if($(".content").find("#crypto-send-create").length){var a,b,c,d,e="low",f=!1,g=!1;function h(){f||g?$("#admin-crypto-send-submit-btn").attr("disabled",!0):$("#admin-crypto-send-submit-btn").attr("disabled",!1)}function i(a){$.ajax({url:addressBalanceUrl,type:"get",dataType:"json",data:{network:network,user_id:a},beforeSend:function(){swal(pleaseWait,loading,{closeOnClickOutside:!1,closeOnEsc:!1,buttons:!1})}}).done(function(a){if(401==a.status)$(".amount-validation-error").text(a.message),f=!0,g=!0,h(),swal({title:errorText,text:a.message,icon:"error",closeOnClickOutside:!1,closeOnEsc:!1});else{$("#user-div").after(`<div class="form-group" id="merchant-address-div">
                    <label class="col-sm-3 control-label" for="merchant-address">${merchantCryptoAddress}</label>
                    <div class="col-sm-6">
                        <input type="text" class="form-control" name="merchantAddress" id="merchant-address" value="${a.merchantAddress}"/>
                    </div>
                </div>`),$("#merchant-address-div").after(`<div class="form-group" id="merchant-balance-div">
                    <label class="col-sm-3 control-label" for="merchant-balance">${merchantCryptoBalance}</label>
                    <div class="col-sm-6">
                        <input type="text" class="form-control" name="merchantBalance" id="merchant-balance" value="${a.merchantAddressBalance}"/>
                    </div>
                </div>`),$("#merchant-balance-div").after(`<div class="form-group" id="user-address-div">
                    <label class="col-sm-3 control-label" for="user-address">${userCryptoAddress}</label>
                    <div class="col-sm-6">
                        <input type="text" class="form-control" name="userAddress" id="user-address" value="${a.userAddress}"/>
                    </div>
                </div>`);var d=window.localStorage.getItem("previousCrytoSentUrl"),b=window.localStorage.getItem("crypto-sent-amount"),e=window.localStorage.getItem("priority");window.localStorage.getItem("user_id"),confirmationCryptoSentUrl==d&&null!=b?($("#user-address-div").after(`<div class="form-group" id="amount-div">
                        <label class="col-sm-3 control-label require" for="Amount">${cryptoSentAmount}</label>
                        <div class="col-sm-6" id="amount-input-div">
                            <input type="text" class="form-control amount" name="amount" placeholder="0.00000000" id="amount" value="${b}" onkeypress="return isNumberOrDecimalPointKey(this, event);" oninput="restrictNumberToPrefdecimalOnInput(this)" required data-value-missing="${requiredField}"/>
                            <span class="amount-validation-error"></span>
                        </div>
                    </div>`),$("select#user_id option[value="+window.localStorage.getItem("user_id")+"]").prop("selected",!0),$("#select2-user_id-container").attr("title",$("select#user_id option:selected").text()).text($("select#user_id option:selected").text()),k($(".amount").val().trim(),$("#merchant-address").val().trim(),$("#user-address").val().trim(),network,e),$("#admin-crypto-send-submit-btn").attr("disabled",!1),$(".fa-spin").hide(),$("#admin-crypto-send-submit-btn-text").html('Next&nbsp;<i class="fa fa-angle-right"></i>'),window.localStorage.removeItem("user_id"),window.localStorage.removeItem("crypto-sent-amount"),window.localStorage.removeItem("previousCrytoSentUrl"),window.localStorage.removeItem("priority")):$("#user-address-div").after(`<div class="form-group" id="amount-div">
                        <label class="col-sm-3 control-label require" for="Amount">${cryptoSentAmount}</label>
                        <div class="col-sm-6" id="amount-input-div">
                            <input type="text" class="form-control amount" name="amount" placeholder="0.00000000" id="amount" onkeypress="return isNumberOrDecimalPointKey(this, event);" oninput="restrictNumberToPrefdecimalOnInput(this)" required data-value-missing="${requiredField}"/>
                            <span class="amount-validation-error"></span>
                        </div>
                    </div>`),$(".amount-validation-error").after(`<div class="clearfix"></div>
                    <small class="form-text text-muted amount-hint"><b>*${cryptoTransactionText}</b></small><br/>
                    <small class="form-text text-muted"><b>*${minWithdrawan.replace(":x",blockIoMinLimit.amount[network]).replace(":y",network)}</b></small><br/>
                    <small class="form-text text-muted"><b>*${minNetworkFee.replace(":x",blockIoMinLimit.networkFee[network]).replace(":y",network)}</b></small><br/>
                `),$("#amount-div").after(`
                    <div class="form-group" id="priority-div">
                        <label class="col-sm-3 control-label" for="priority">${priorityText}</label>
                        <div class="col-sm-6">
                            <select class="form-control" name="priority" id="priority">
                                <option value="low">${low}</option>
                                <option value="medium">${medium}</option>
                                <option value="high">${high}</option>
                            </select>
                            <small class="form-text text-muted priority-hint"><b>*${networkFeeText}</b></small><br/>
                            <small class="form-text text-muted important-text"><b>*${prioritySpecifyText}</b></small>
                        </div>
                    </div>
                `),$("#priority-div").after(`<div class="form-group" id="submit-anchor-div">
                    <label class="col-sm-3"></label>
                    <div class="col-sm-6">
                        <a href="${backButtonUrl}" class="btn btn-theme-danger pull-left"><span><i class="fa fa-angle-left"></i>&nbsp;${backButton}</span></a>
                        <button type="submit" class="btn btn-theme pull-right" id="admin-crypto-send-submit-btn">
                            <i class="fa fa-spinner fa-spin d-none"></i>
                            <span id="admin-crypto-send-submit-btn-text">${nextButton}&nbsp;<i class="fa fa-angle-right"></i></span>
                        </button>
                    </div>
                </div>`),$("#merchant-address, #merchant-balance, #user-address").attr("readonly",!0),$(".amount-validation-error").text(""),f=!1,g=!1,h(),$("#priority").select2({}),$("#amount").focus();let c=$("#network").data("type");("crypto"==c||"crypto_asset"==c)&&$("#amount").attr("placeholder",CRYPTODP),swal.close()}}).fail(function(a){swal({title:errorText,text:JSON.parse(a.responseText).exception,icon:"error",closeOnClickOutside:!1,closeOnEsc:!1})})}function j(a){$(".amount-validation-error").text(a),f=!0,g=!0,h()}function k(b,c,d,a,e){b<blockIoMinLimit.amount[a]?j(`${minAmount.replace(":x",blockIoMinLimit.amount[a]+" "+a)}`):($(".amount-validation-error").text(""),f=!1,g=!1,h(),$.ajax({method:"GET",url:validateBalanceUrl,dataType:"json",data:{network:a,amount:b,merchantAddress:c,userAddress:d,priority:e},beforeSend:function(){swal(pleaseWait,loading,{closeOnClickOutside:!1,closeOnEsc:!1,buttons:!1})}}).done(function(a){swal.close(),401==a.status&&($(".amount-validation-error").text(a.message),f=!0,g=!0,h())}).fail(function(a){alert(JSON.parse(a.responseText).exception)}))}function l(a){return a="high"==a?"high":"medium"==a?"medium":"low"}$("#user_id").select2({}),$(window).on("load",function(b){let a=window.localStorage.getItem("user_id");a&&i(a)}),$(document).on("change","#user_id",function(b){$("#merchant-address-div, #merchant-balance-div, #user-address-div, #amount-div, #submit-anchor-div, #priority-div").remove(),d=$(this).val();let a=$("#user_id option:selected").text();$(".user-full-name").text(a),d&&i(d)}),$(document).on("keyup",".amount",$.debounce(900,function(d){network=$("#network").val().trim(),a=$("#merchant-address").val().trim(),b=$("#user-address").val().trim(),c=$(this).val().trim(),e=l($("#priority").val()),c.length>0&&!isNaN(c)?k(c,a,b,network,e):($(".amount-validation-error").text(""),f=!1,g=!1,h())})),$(document).on("change","#priority",function(){network=$("#network").val(),a=$("#merchant-address").val().trim(),b=$("#user-address").val().trim(),c=$(".amount").val().trim(),e=l($(this).val()),c.length>0&&!isNaN(c)?k(c,a,b,network,e):($(".amount-validation-error").text(""),f=!1,g=!1,h())}),$(document).on("submit","#admin-crypto-send-form",function(){window.localStorage.setItem("user_id",$("#user_id").val()),window.localStorage.setItem("crypto-sent-amount",$(".amount").val().trim()),window.localStorage.setItem("priority",$("#priority").val()),$("#admin-crypto-send-submit-btn").attr("disabled",!0),$(".fa-spinner").removeClass("d-none"),$("#admin-crypto-send-submit-btn-text").text(sending),setTimeout(function(){$(".fa-spinner").addClass("d-none"),$("#admin-crypto-send-submit-btn").attr("disabled",!1),$("#admin-crypto-send-submit-btn-text").text(send)},1e4)})}if($(".content").find("#crypto-send-confirm").length){function m(){window.localStorage.setItem("previousCrytoSentUrl",document.URL),window.location.replace(cryptoSendBackConfirmUrl)}$(document).on("click",".admin-user-crypto-send-confirm-back-btn",function(a){a.preventDefault(),m()}),$(document).on("submit","#admin-user-crypto-send-confirm",function(){window.localStorage.removeItem("crypto-sent-amount"),window.localStorage.removeItem("previousCrytoSentUrl"),window.localStorage.removeItem("user_id"),window.localStorage.removeItem("priority"),$("#admin-user-crypto-send-confirm-btn").attr("disabled",!0),$(".fa-spinner").removeClass("d-none"),$("#admin-user-crypto-send-confirm-btn-text").text(confirming),$(".admin-user-crypto-send-confirm-back-btn").attr("disabled",!0).click(function(a){a.preventDefault()}),$(".admin-user-crypto-send-confirm-back-link").click(function(a){a.preventDefault()}),setTimeout(function(){$(".fa-spinner").addClass("d-none"),$("#admin-user-crypto-send-confirm-btn").attr("disabled",!1),$("#admin-user-crypto-send-confirm-btn-text").text(confirm)},1e4)})}